import React, {createContext, useReducer} from 'react'

const currentUserContext = createContext([{}, () => {}])

const initialState ={
    isLoading: false,
        isLoggedIn: null,
        currentUser: null
}


const reducer = (state = initialState, { type, payload }) => {
    switch (type) {

    case 'LOADING':
        return { ...state, isLoading: true }

    case 'SET_AUTHORIZED':
        return { ...state, isLoggedIn: true, isLoading: false, currentUser: payload }

    case 'SET_UNAUTHORIZED':
        return { ...state, isLoggedIn: false }

    case 'LOGOUT':
        return { ...initialState, isLoggedIn: false }

    default:
        return state
    }
}


const CurrentUserProvider = ({children}) => {
    const value = useReducer(reducer, initialState)

    return (
        <currentUserContext.Provider value={value}>
            {children}
        </currentUserContext.Provider>
    )
}

export {currentUserContext, CurrentUserProvider}