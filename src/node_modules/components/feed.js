import React from 'react'
import {Link} from 'react-router-dom'

import TagList from 'components/tagList'
import AddToFavorites from 'components/addToFavorites'

const Feed = ({articles}) => {
    return (
        <div>
            {articles.map((article, i) => {
                const {favorited, slug, author, createdAt, tagList, title, description, favoritesCount} = article

                return <div className="article-preview" key={i}>
                    <div className="article-meta">
                        <Link to={`/profiles/${author.username}`}>
                            <img src={author.image} alt="img"/>
                        </Link>
                        <div className="info">
                        <Link className="author" to={`/profiles/${author.username}`}>
                        {author.username}
                        </Link>
                        <span className="date">{createdAt}</span>
                        </div>
                        <div className="pull-xs-right">
                            <AddToFavorites 
                            isFavorited={favorited} 
                            favoritesCount={favoritesCount}
                            articleSlug={slug}
                            />
                        </div>
                    </div>
                    <Link className="preview-link" to={`/articles/${slug}`}>
                        <h1>{title}</h1>
                        <p>{description}</p>
                        <span>Read more...</span>
                        <TagList tags={tagList}/>
                    </Link>
                </div>
            }
            )}
        </div>
    )
}

export default Feed
